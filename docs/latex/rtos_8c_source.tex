\doxysection{rtos.\+c}
\hypertarget{rtos_8c_source}{}\label{rtos_8c_source}\index{MS\_RF\_Board/src/RTOS/rtos.c@{MS\_RF\_Board/src/RTOS/rtos.c}}
\mbox{\hyperlink{rtos_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{rtos_8h}{rtos.h}}"{}}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00012}00012\ \textcolor{preprocessor}{\#include\ "{}freertos/FreeRTOS.h"{}}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}freertos/task.h"{}}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00014}00014\ \textcolor{preprocessor}{\#include\ "{}esp\_log.h"{}}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00016}\mbox{\hyperlink{rtos_8c_afc3d101f633a076cc1ca84b85b6224b2}{00016}}\ \textcolor{preprocessor}{\#define\ TAG\ "{}RTOS"{}}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00032}\mbox{\hyperlink{rtos_8c_a5957c24010219272b3d5f5d305ed0ffd}{00032}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{rtos_8c_a5957c24010219272b3d5f5d305ed0ffd}{rtos\_create\_task}}(TaskFunction\_t\ task\_function,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *task\_name,\ uint32\_t\ stack\_depth,}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00033}00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *parameters,\ UBaseType\_t\ priority,\ TaskHandle\_t\ *handle,\ \textcolor{keywordtype}{int}\ core\_id)\ \{}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00034}00034\ \ \ \ \ BaseType\_t\ result\ =\ xTaskCreatePinnedToCore(task\_function,\ task\_name,\ stack\_depth,}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00035}00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parameters,\ priority,\ handle,\ core\_id);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00036}00036\ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ pdPASS)\ \{}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00037}00037\ \ \ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{battery__monitoring_8c_afc3d101f633a076cc1ca84b85b6224b2}{TAG}},\ \textcolor{stringliteral}{"{}Task\ '\%s'\ created\ successfully."{}},\ task\_name);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00038}00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00039}00039\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00040}00040\ \ \ \ \ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{battery__monitoring_8c_afc3d101f633a076cc1ca84b85b6224b2}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ task\ '\%s'."{}},\ task\_name);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00041}00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00042}00042\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00043}00043\ \}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00052}\mbox{\hyperlink{rtos_8c_af9998d7c123edee26fc05c818ee61ecb}{00052}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{rtos_8c_af9998d7c123edee26fc05c818ee61ecb}{rtos\_delete\_task}}(TaskHandle\_t\ handle)\ \{}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00053}00053\ \ \ \ \ vTaskDelete(handle);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00054}00054\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{battery__monitoring_8c_afc3d101f633a076cc1ca84b85b6224b2}{TAG}},\ \textcolor{stringliteral}{"{}Task\ deleted\ successfully."{}});}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00055}00055\ \}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00064}\mbox{\hyperlink{rtos_8c_ae2354350f62a9fbf3133d574e476bd4e}{00064}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{rtos_8c_ae2354350f62a9fbf3133d574e476bd4e}{rtos\_delay\_ms}}(uint32\_t\ milliseconds)\ \{}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00065}00065\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{battery__monitoring_8c_afc3d101f633a076cc1ca84b85b6224b2}{TAG}},\ \textcolor{stringliteral}{"{}Delaying\ task\ for\ \%lu\ ms."{}},\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})milliseconds);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00066}00066\ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(milliseconds));}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00067}00067\ \}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00075}\mbox{\hyperlink{rtos_8c_a097b4db687b0ac7cabfbbf2ce12b2188}{00075}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{rtos_8c_a097b4db687b0ac7cabfbbf2ce12b2188}{rtos\_log\_task\_stats}}()\ \{}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00076}00076\ \ \ \ \ \textcolor{keywordtype}{char}\ *buffer\ =\ pvPortMalloc(1024);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00077}00077\ \ \ \ \ \textcolor{keywordflow}{if}\ (buffer)\ \{}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00078}00078\ \ \ \ \ \ \ \ \ vTaskList(buffer);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00079}00079\ \ \ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{battery__monitoring_8c_afc3d101f633a076cc1ca84b85b6224b2}{TAG}},\ \textcolor{stringliteral}{"{}Task\ statistics:\(\backslash\)n\%s"{}},\ buffer);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00080}00080\ \ \ \ \ \ \ \ \ vPortFree(buffer);}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00081}00081\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00082}00082\ \ \ \ \ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{battery__monitoring_8c_afc3d101f633a076cc1ca84b85b6224b2}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ allocate\ memory\ for\ task\ statistics."{}});}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00083}00083\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{rtos_8c_source_l00084}00084\ \}}

\end{DoxyCode}
